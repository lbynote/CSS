# CSS 定位概述（positioning）

## CSS 定位和浮动
CSS为定位和浮动提供了一些属性，利用这些属性，可以建立列式布局，将布局的一部分与另一部分重叠，还可以完成多年来通常需要多个表格才能完成的任务。  
定位的基本思想很简单，它允许你定义元素框相对于其正常位置应该出现的位置，或者相对于父元素、另一个元素甚至浏览器窗口本身的位置。  
CSS 1中首次提出了浮动，浮动不完全是定位，不过，它也不是正常流布局。

## 一切皆为框
div、h1、p元素常常被称为块级元素。这意味着这些元素显示为一块内容，即“块框”。与之相反，span和strong等元素称为“行内元素”，这是因为它们的内容显示在行中，即“行内框”。  
可以使用display属性改变生成的框的类型。这意味着，通过将display属性设置为block，可以让行内元素表现得向块级元素一样。还可以通过把display属性设置为none，让生成的元素没有框。这样的话，该框及其所有内容就不再显示，不占用文档中的空间。  
但是在一种情况下，即使没有进行显式定义，也会创建块级元素，这种情况发生在把一些文本添加到一个块级元素（比如div）的开头。即使没有把这些文本定义为段落，它也会被当做段落对待：
``` html
<div>
some text
<p>Some more text.</p>
</div>
```
在这种情况下，这个框称为无名块框，因为它不与专门定义的元素相关联。  
块级元素的文本行也会发生类似的情况。假设有一个包含三行文本的段落，每行文本形成一个无名框，无法直接对无名块或行框应用某种样式，因为没有可以应用样式的地方（注意行框和行内框是两个概念）。

## CSS定位机制
CSS有三种基本的定位机制：普通流、浮动、绝对定位。  
除非专门制定，否则所有框都在普通流中定位。也就是说，普通流中的元素的位置由HTML中的位置决定。  
块级框从上到下一个接一个地排列，框之间的垂直距离是由框的垂直外边距计算出来的。  
行内框在一行中水平布置。可以使用水平内边距、边框和外边距调整它们的距离。但是，垂直内边距、边框和外边框不影响行内框的高度。由一行形成的水平框称为行框（line box），行框的高度总是足以容纳它包含的所有行内框。不过，设置行高可以增加这个框的高度。

## CSS position属性
通过使用position属性，可以选择4种不同类型的定位，这会影响元素框生成的方式：
- static：元素框正常生成。块级元素生成一个矩形框，作为文档流的一部分，行内元素则会创建一个或多个行框，置于父元素中。
- relative：元素框偏移某个距离。元素仍保持其未定位前的形状，它原本所占的空间仍保留。
- absolute：元素框从文档流完全删除，并相对于其包含块定位。包含块可能是文档中的另一个元素或者是初始包含块。元素原先在正常文档流中所占的空间会关闭，就好像元素原来不存在一样。元素定位后生成一个块级框，而不论它原来在正常流中生成何种类型的框。
- fixed：元素框的表现类似于将position设置为absolute，不过其包含块是视窗本身。

相对定位实际上被看做普通流定位模型的一部分，因为元素的位置相对于它在普通流中的位置。

# CSS相对定位
设置为相对定位的元素会偏移某个距离。元素人保持其未定位前的形状，它所占的空间仍保留。

## CSS相对定位
如果一个元素进行相对定位，它将出现在它所在的位置上，然后，可以通过设置垂直或水平位置，让这个元素“相对于”它的起点进行移动。  
如果将top设置为20px，那么框将在原位置顶部下面20像素的地方。如果left设置为30像素，那么会在元素左边创建30像素的空间，也就是元素将向右移动：
``` css
#box_relative {
    position: relative;
    top: 20px;
    left: 30px;
}
```
注意，在使用相对定位时，无论是否进行移动，元素仍然占据原来的空间。因此，移动元素会导致它覆盖其他框。

# CSS 绝对定位
设置为绝对定位的元素框从文档流完全删除，并相对于其包含块定位，包含块可能是文档中另一个元素或者是初始包含块。元素原先在正常文档流中所占的空间会关闭，就好像该元素原来不存在一样。元素定位后生成一个块级框，而不论原来它在正常流中生成何种类型的框。

## CSS 绝对定位
绝对定位使元素的位置与文档流无关，因此不占据空间。这一点与相对定位不同，相对定位实际上被看做普通流定位模型的一部分，因为元素的位置相对于它在普通流中的位置。  
普通流中其他元素的布局就像绝对定位的元素不存在一样：
``` css
#box_relative {
    position: absolute;
    top: 20px;
    left: 30px;
}
```
绝对定位的元素的位置相对于最近的已定位祖先元素，如果元素没有已定位的祖先元素，那么它的位置相对与最初的包含块。  
根据用户代理的不同，最初的包含块可能是画布或HTML元素。  
因为绝对定位的框与文档流无关，所以他们可以覆盖网页上的其他元素，可以通过设置z-index属性来控制这些框的堆放次序。

# CSS 浮动
浮动的框可以向左或向右移动，直到它的外边缘碰到包含框或另一个浮动框的边框为止。  
由于浮动框不在文档的普通流中，所以文档的普通流中的块框表现得就像浮动框不存在一样。

## CSS浮动
如果包含框太窄，无法容纳水平排列的多个浮动元素，那么其他浮动块向下移动，直到有足够的空间。如果浮动元素的高度不同，那么当它们向下移动时可能会被其他浮动元素“卡住”。

## CSS float属性
通过float属性实现元素的浮动。

### 行框和清理
浮动框旁边的行框被缩短，从而给浮动框留出空间，行框围绕浮动框。因此，创建浮动框可以是文字围绕图像：
![围绕](/img/围绕.jpg/)
要想阻止行框围绕浮动框，需要对该框应用clear属性。clear属性的值可以是left、right、both或none，它表示框的哪些边不应该挨着浮动框。  
为了实现这种效果，在被清理的元素的上外边距上添加足够的空间，是元素的顶边缘下降到浮动框下面:
![清理](/img/清理.jpg/)